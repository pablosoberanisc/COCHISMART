-- Tabla CLIENTE
CREATE TABLE cliente (
  id_cliente NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(100),
  telefono VARCHAR2(15) UNIQUE,
  direccion VARCHAR2(200),
  fecha_registro DATE DEFAULT SYSDATE
);

-- Tabla PRODUCTO
CREATE TABLE producto (
  id_producto NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre_producto VARCHAR2(100),
  descripcion VARCHAR2(200),
  precio_unitario NUMBER(10,2),
  disponible CHAR(1) DEFAULT 'S' CHECK (disponible IN ('S', 'N'))
);

-- Tabla VENTA
CREATE TABLE venta (
  id_venta NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  id_cliente NUMBER,
  fecha_venta TIMESTAMP DEFAULT SYSTIMESTAMP,
  direccion_entrega VARCHAR2(200),
  total NUMBER(10,2),
  metodo_pago VARCHAR2(50),
  FOREIGN KEY (id_cliente) REFERENCES cliente(id_cliente)
);

-- Tabla DETALLE_VENTA
CREATE TABLE detalle_venta (
  id_detalle NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  id_venta NUMBER,
  id_producto NUMBER,
  cantidad NUMBER,
  precio_unitario NUMBER(10,2),
  subtotal NUMBER(10,2),
  FOREIGN KEY (id_venta) REFERENCES venta(id_venta),
  FOREIGN KEY (id_producto) REFERENCES producto(id_producto)
);
